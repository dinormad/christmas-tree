# 🎄 照片上传功能使用说明

## ✨ 功能概述

圣诞树应用现在支持通过用户界面直接上传和管理照片！您可以：

1. ✅ 通过可视化界面上传照片
2. ✅ 自动重命名照片为正确的格式（top.jpg, 1.jpg, 2.jpg...）
3. ✅ 预览所有已选择的照片
4. ✅ 拖放上传支持
5. ✅ 文件大小检查和警告

## 🚀 快速开始

### 步骤 1: 启动应用
```bash
npm run dev
```

### 步骤 2: 打开照片管理器
在浏览器中打开应用后，点击右下角的 **"📸 管理照片"** 按钮

### 步骤 3: 上传照片
1. **上传主照片（top.jpg）**
   - 拖拽图片到上方的区域，或点击选择文件
   - 这张照片会显示在圣诞树顶的星星上

2. **上传树身照片**
   - 拖拽多张图片到下方的区域，或点击选择文件
   - 可以一次选择多张，系统会自动命名为 1.jpg, 2.jpg, 3.jpg...

3. **查看和管理**
   - 在网格中查看所有已选择的照片
   - 可以删除不需要的照片
   - 删除后，其他照片会自动重新编号

### 步骤 4: 保存照片

**方法 A - 查看手动说明**（推荐用于开发环境）
1. 点击 **"📋 查看手动保存说明"** 按钮
2. 按照弹出的说明，手动将照片保存到 `public/photos/` 文件夹
3. 刷新浏览器页面

**方法 B - 自动上传**（需要后端支持）
1. 点击 **"上传照片"** 按钮
2. 系统会尝试自动保存照片
3. 在开发环境中可能会失败，这时请使用方法 A

## 📋 照片要求

### 主照片 (top.jpg)
- **显示位置**: 圣诞树顶的立体五角星
- **建议尺寸**: 正方形或 4:3 比例
- **文件大小**: 建议 500KB 以内

### 树身照片 (1.jpg, 2.jpg, 3.jpg...)
- **显示方式**: 拍立得风格悬浮在树上
- **建议尺寸**: 正方形或 4:3 比例
- **文件大小**: 单张建议 500KB 以内
- **数量限制**: 无限制，但建议 50 张以内

## 🛠️ 其他方法

### 使用 PowerShell 脚本
如果您已经有照片文件，可以使用重命名脚本：

```powershell
.\rename-photos.ps1
```

这个脚本会：
- 扫描 `public/photos/` 文件夹中的所有图片
- 让您选择一张作为主照片
- 自动重命名其余照片
- 创建备份

### 手动复制文件
直接将照片复制到 `public/photos/` 文件夹：
```
public/photos/
  ├── top.jpg      # 主照片
  ├── 1.jpg        # 第一张树身照片
  ├── 2.jpg        # 第二张树身照片
  └── ...
```

## 🎯 修改照片数量

如果您上传了超过 31 张照片，需要修改配置：

1. 打开 `src/App.tsx`
2. 找到第 19 行附近：
   ```typescript
   const TOTAL_NUMBERED_PHOTOS = 31;
   ```
3. 改为您的照片数量：
   ```typescript
   const TOTAL_NUMBERED_PHOTOS = 100; // 例如 100 张
   ```
4. 保存文件

## 💡 提示和技巧

### 图片优化
- 使用 [TinyPNG](https://tinypng.com/) 压缩图片
- 使用图片编辑器裁剪为正方形
- 确保主体居中以获得最佳显示效果

### 性能优化
- 单张图片保持在 500KB 以内
- 总照片数量建议不超过 50 张
- 使用 JPG 格式而非 PNG 以减小文件大小

### 故障排除
**Q: 上传后看不到照片？**
- 检查照片是否保存到 `public/photos/` 文件夹
- 刷新浏览器页面
- 检查浏览器控制台是否有错误

**Q: 照片显示不正确？**
- 确认文件名格式正确（top.jpg, 1.jpg, 2.jpg...）
- 确认已更新 `TOTAL_NUMBERED_PHOTOS` 配置
- 清除浏览器缓存后刷新

**Q: 能上传视频吗？**
- 当前仅支持图片格式（JPG, PNG, WEBP 等）

## 📞 需要帮助？

查看完整文档：
- [README.md](./README.md) - 项目主要文档
- [PHOTO_UPLOAD_GUIDE.md](./PHOTO_UPLOAD_GUIDE.md) - 详细的照片上传指南

---

祝您使用愉快！🎄✨
